"""–ü—Ä–∞–∫—Ç–∏–∫–∞ 10: —Ä–æ—É—Ç–∏–Ω–≥ –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏.

–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- –ó–∞–¥–∞–Ω–∏–µ 1: –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É ping (route=\"server\") —Ä–∞–∑ –≤ 2 —Å–µ–∫ –∏ emoji (route=\"all\") –ø–æ –∫–ª–∞–≤–∏—à–µ.
  –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞–ø–∏—à–∏—Ç–µ, –∑–∞—á–µ–º —Ä–∞–∑–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç.
- –ó–∞–¥–∞–Ω–∏–µ 2: –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–ª–∏ docstring –æ—Ç–≤–µ—Ç—å—Ç–µ, –ø–æ—á–µ–º—É –≤ –∏–≥—Ä–µ —Å–æ —Å—á—ë—Ç–æ–º —Ö–æ—Å—Ç —Ä–∞—Å—Å—ã–ª–∞–µ—Ç score_update, –∞ –Ω–µ –∫–ª–∏–µ–Ω—Ç –≤—Å–µ–º.
- –ó–∞–¥–∞–Ω–∏–µ 3: –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç–≤–µ—Ç—å—Ç–µ, –∫—Ç–æ –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Å—ã–ª–∞—Ç—å roster –≤ –ª–æ–±–±–∏ (—É—Ä–æ–∫ 4) –∏ –ø–æ—á–µ–º—É.
"""

import pygame
import spritePro as s


def multiplayer_main(net: s.NetClient, role: str, color: str) -> None:
    s.get_screen((800, 600), "Lesson 10 - Practice Routing")
    ctx = s.multiplayer.init_context(net, role, color)

    # TODO 1: –¥–æ–±–∞–≤—å—Ç–µ —Ç–∞–π–º–µ—Ä ping_interval (2 —Å–µ–∫) –∏ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ ‚Äî s.events.send("ping", route="server", net=ctx).
    # TODO 1: –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–ª–∞–≤–∏—à–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä E) ‚Äî s.events.send("emoji", route="all", net=ctx, symbol="üëã").
    # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ping —à–ª—ë–º —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –≤—Å–µ—Ö (—Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —É—á–∏—Ç—ã–≤–∞—Ç—å); emoji ‚Äî –≤—Å–µ–º, —á—Ç–æ–±—ã –≤—Å–µ –≤–∏–¥–µ–ª–∏.

    ping_timer = 0.0
    PING_INTERVAL = 2.0

    s.TextSprite(
        "TODO: ping –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫ (server), E = emoji (all)",
        22,
        (240, 240, 240),
        (20, 20),
        anchor=s.Anchor.TOP_LEFT,
    )

    while True:
        s.update(fill_color=(18, 18, 24))
        dt = s.dt
        ping_timer += dt

        # TODO 1: if ping_timer >= PING_INTERVAL: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å ping, —Å–±—Ä–æ—Å–∏—Ç—å ping_timer.
        # TODO 1: if s.input.was_pressed(pygame.K_e): –æ—Ç–ø—Ä–∞–≤–∏—Ç—å emoji.

        for msg in ctx.poll():
            ev = msg.get("event")
            data = msg.get("data", {})
            s.events.send(ev, **data)


# –ó–∞–¥–∞–Ω–∏–µ 2 (–æ—Ç–≤–µ—Ç –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∑–¥–µ—Å—å –∏–ª–∏ –≤ lesson.md):
# –ü–æ—á–µ–º—É —Ö–æ—Å—Ç —Ä–∞—Å—Å—ã–ª–∞–µ—Ç score_update, –∞ –Ω–µ –∫–ª–∏–µ–Ω—Ç –≤—Å–µ–º?
# –û—Ç–≤–µ—Ç: ...

# –ó–∞–¥–∞–Ω–∏–µ 3 (–æ—Ç–≤–µ—Ç –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏):
# –ö—Ç–æ –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Å—ã–ª–∞—Ç—å roster –≤ –ª–æ–±–±–∏ –∏ –ø–æ—á–µ–º—É?
# –û—Ç–≤–µ—Ç: ...
